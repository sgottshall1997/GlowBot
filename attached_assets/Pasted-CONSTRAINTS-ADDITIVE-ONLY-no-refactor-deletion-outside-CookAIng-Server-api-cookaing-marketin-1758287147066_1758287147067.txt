CONSTRAINTS
- ADDITIVE ONLY; no refactor/deletion outside CookAIng.
- Server: /api/cookaing-marketing/** ; Client: /src/cookaing-marketing/**
- Drizzle migrations: non-destructive only (Phase 1 social_queue, hashtag_suggestions, optimal_times already exist).
- Must run fully in MOCK mode with empty .env (live only if keys present).
- Respect feature flags: ENABLE_SOCIAL_PUBLISH, ENABLE_SOCIAL_ENGAGE, ENABLE_HASHTAG_RESEARCH, ENABLE_OPTIMAL_TIMING.
- Integrate with campaigns, analytics_events, Dashboard, Reports, and Health page.

GOAL (PHASE 4)
Deliver complete Social Media Automation:
1) Direct Platform Publishing (queue, schedule, publish to IG/FB/TikTok/X/YT)
2) Automated Engagement (like/comment/reply stubs)
3) Hashtag Research & Optimization
4) Optimal Timing Intelligence
Surfaces in:
- Social Automation page (tabs: Publish, Engagement, Hashtags, Timing)
- Campaign Detail (publish/queue actions)
- Dashboard + Reports (new KPIs and breakdowns)

==============================================================================
A) PROVIDERS — /src/cookaing-marketing/services/providers/*
==============================================================================
- social.provider.ts
  live: use META/TIKTOK/X/YT APIs if keys present
  mock: deterministic publish IDs and statuses (draft→queued→published)
- engagement.provider.ts
  mock: logs actions (like/comment/reply); deterministic outputs
- hashtag.provider.ts
  live: trending/insights API if keys present
  mock: generate 10 tags based on input topic and seeded popularity scores
- timing.provider.ts
  live: compute best times from past engagement
  mock: deterministic “optimal windows” (e.g., 12pm–1pm, 6pm–8pm)

==============================================================================
B) SERVICES — /src/cookaing-marketing/services/social.service.ts
==============================================================================
- publishToSocial({campaignId, channel, platform, scheduledAt?, payloadJson})
  1) Create social_queue row (status='queued')
  2) Call provider; update status ('draft','queued','published')
  3) Persist remote IDs in result_json
  4) Log analytics_events (type='social_publish')
- runEngagement({platform, action:'like'|'comment'|'reply', targets[], text?})
  • Logs engagement actions; persists analytics_events (type='social_engage')
- suggestHashtags({topic, platform?})
  • Returns ranked tags; saves to hashtag_suggestions
- getOptimalTimes({platform, segmentId?})
  • Returns times_json; saves to optimal_times

==============================================================================
C) API ROUTES — /api/cookaing-marketing
==============================================================================
POST /social/publish
  {campaignId, platform, channel, scheduledAt?, payload}
  → {queueId, status, remoteId?, mode}

GET /social/queue
  {campaignId?, platform?, status?}
  → list social_queue rows

POST /social/engage
  {platform, action, targets, text?}
  → {results[], mode}

GET /social/hashtags
  {topic, platform?}
  → {tags[], mode}

GET /social/optimal-times
  {platform, segmentId?}
  → {times[], mode}

==============================================================================
D) CLIENT UI
==============================================================================
1) Social Automation Page — /cookaing-marketing/pages/social-automation
   Tabs:
   - Publish:
     * Campaign selector + platform dropdown
     * Form for caption, media links (mock only)
     * Schedule datetime picker
     * Queue table (status chips, remote ID if live)
   - Engagement:
     * Action selector (like/comment/reply)
     * Target post URLs
     * Logs in a results table
   - Hashtags:
     * Topic input
     * Suggestion chips (copy-to-clipboard, “Insert to Campaign”)
   - Optimal Times:
     * Platform selector
     * Heatmap/calendar view of suggested posting times

2) Campaign Detail
   - Add “Social Actions” panel:
     * “Queue Post” → calls /social/publish
     * “Suggest Hashtags” drawer → inject into artifact captions
     * “Optimal Times” card → tooltip with next best slot

3) Dashboard Enhancements
   - KPI row: Social Posts Queued, Social Posts Published, Engagement Actions Run
   - Chart: Posts vs Engagement trend over last 30 days

4) Reports
   - Breakdown: by platform (queued, published, CTR if available)
   - Engagement volume & types
   - Hashtag performance (mock counts if no live data)

==============================================================================
E) HEALTH + DOCS
==============================================================================
- Extend Health endpoint with: socialPublish, socialEngage, hashtags, optimalTimes
- Docs update: “Social Media Automation”
   • How publish/queue works
   • Mock/live mode
   • Supported platforms
   • How hashtags + timing feed into campaigns

==============================================================================
F) SEEDS
==============================================================================
- social_queue: 5 queued posts (mix platforms, statuses)
- hashtag_suggestions: 2 topics with tags
- optimal_times: 2 platforms with time windows
- engagement logs: 3 actions (like/comment/reply)

==============================================================================
G) TESTS
==============================================================================
Vitest:
- publishToSocial persists queue row; provider returns mock remoteId; status transitions
- runEngagement logs actions + analytics_events
- suggestHashtags deterministic tags for topic
- getOptimalTimes returns seeded time windows

Playwright:
- Social Automation page → Publish tab: queue a mock post, see it appear in table with status
- Engagement tab: run mock “like”, see logs
- Hashtags tab: enter topic, see chips, insert to campaign caption
- Timing tab: select platform, heatmap renders
- Campaign Detail → queue post + insert hashtags
- Dashboard shows social KPIs; Reports show platform breakdown